<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
  <title>Luis' Hold’em Helper</title>

  <meta name="theme-color" content="#0b1220" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="color-scheme" content="dark light">

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="wrap">
    <header>
      <h1 class="title">Luis' Hold’em Helper</h1>
      <div class="hdrRight">
        <button id="handsBtn" class="iconBtn" type="button" aria-haspopup="dialog" style="background-color: #FF8A65" aria-controls="handsModal">
          Kombinationen
        </button>
        <div class="pill">Deck: <span id="deckLeft">52</span></div>
      </div>
    </header>

    <div class="layout">

      <!-- ====== KOMBINIERTER BEREICH: Anzeige + Auswahl (1+2) ====== -->
      <section class="panel area-cards" id="panelCards">
        <div class="hd">
          <div class="ttl"><span class="stepBadge"><b>1–2</b> Karten</span></div>
          <div class="muted" id="targetHint">Ziel: Hole 1</div>
        </div>

        <div class="bd">
          <div class="cardsGrid">

            <!-- Links: Setup + Slots -->
            <div class="subCard">
              <div class="subHd">
                <div class="ttl">Anzeige</div>
                <div class="muted">Stage · Gegner · Slots</div>
              </div>

              <div class="subBd">
                <div class="stack">

                  <div class="seg" role="tablist" aria-label="Stage">
                    <button class="stageBtn active" data-stage="pre" type="button">Pre-Flop</button>
                    <button class="stageBtn" data-stage="flop" type="button">Flop</button>
                    <button class="stageBtn" data-stage="turn" type="button">Turn</button>
                    <button class="stageBtn" data-stage="river" type="button">River</button>
                  </div>

                 <details class="setupMore" id="setupMore">
  <summary>Setup</summary>
  <div class="setupMoreBd">
    <label for="opp" style="margin-top:0;">Gegner (Anzahl)</label>
    <input id="opp" class="range" type="range" min="1" max="8" step="1" value="3" />
    <div class="muted" style="margin-top:6px;">Aktuell: <b id="oppVal">3</b></div>
  </div>
</details>


                  <div>
                    <div class="sectionLabel">Deine Karten</div>
                    <div class="slots" id="heroSlots"></div>
                  </div>

                  <div id="boardArea" style="display:none;">
                    <div class="sectionLabel">Board</div>
                    <div class="slots" id="boardSlots"></div>
                  </div>

                  <div class="btnRow">
                    <button id="undoBtn" class="ghost" type="button">Undo</button>
                    <button id="resetBtn" class="ghost" type="button">Reset</button>
                  </div>

                  <div id="err" class="err"></div>
                </div>
              </div>
            </div>

            <!-- Rechts: Wheel Picker + Preview -->
            <div class="subCard">
              <div class="subHd">
                <div class="ttl">Auswahl</div>
                <div class="muted">Wheel · Preview · Übernehmen</div>
              </div>

              <div class="subBd">
                <div class="stack">

                  <div class="targetChip" id="targetChip">
                    Ziel: <b id="targetChipVal">Hole 1</b>
                  </div>

                  <div class="pickerLayout">
                    <div class="preview" id="preview" title="Tippen = Übernehmen">
                      <div class="cardFace" id="previewCard"></div>
                    </div>

                    <div class="wheelWrap">
                      <div class="wheelBox">
                        <div class="wheelLabel">Rang</div>
                        <div class="wheelFrame">
                          <div class="wheel" id="rankWheel" aria-label="Rang"></div>
                          <div class="wheelCenter" aria-hidden="true"></div>
                          <div class="wheelFadeTop" aria-hidden="true"></div>
                          <div class="wheelFadeBot" aria-hidden="true"></div>
                        </div>
                      </div>

                      <div class="wheelBox">
                        <div class="wheelLabel">Symbol</div>
                        <div class="wheelFrame">
                          <div class="wheel" id="suitWheel" aria-label="Symbol"></div>
                          <div class="wheelCenter" aria-hidden="true"></div>
                          <div class="wheelFadeTop" aria-hidden="true"></div>
                          <div class="wheelFadeBot" aria-hidden="true"></div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="btnRow">
                    <button id="commit" class="primary" type="button">Übernehmen</button>
                    <button id="clearSlotBtn" class="ghost" type="button">Slot leeren</button>
                  </div>

                  <div class="muted" style="line-height:1.35;">
                    Slot antippen zum Ersetzen. Preview antippen = sofort übernehmen.
                  </div>
                </div>
              </div>
            </div>

          </div><!-- /cardsGrid -->
        </div><!-- /bd -->
      </section>

      <!-- ====== UNTEN (FULL WIDTH): Berechnen + Ergebnis ====== -->
      <section class="panel area-compute" id="panelCompute">
        <div class="hd">
          <div class="ttl">Berechnen & Ergebnis</div>
          <div class="muted">Equity / W-T-L / Empfehlung</div>
        </div>

        <div class="bd">
          <div class="computeGrid">

            <!-- Berechnen -->
            <div class="subCard" id="panelCalc">
              <div class="subHd">
                <div class="ttl"><span class="stepBadge"><b>3</b> Berechnen</span></div>
                <div class="muted" id="modeHint">Auto: Monte-Carlo / Exakt (Heads-Up ab Flop)</div>
              </div>
              <div class="subBd">
                <button id="calcBtn" class="primary bigCTA" type="button" disabled>Berechnen</button>
                <button id="cancelBtn" class="danger bigCTA" type="button" style="display:none; margin-top:10px;">Abbrechen</button>

                <div class="ctaHint" id="ctaHint">
                  Setze zuerst beide Hole Cards (und ggf. Board-Karten), dann wird „Berechnen“ aktiv.
                </div>

                <details>
                  <summary>Erweitert</summary>
                  <div class="adv">
                    <div class="advGrid">
                      <div>
                        <label for="iters">Max Iterationen (Monte-Carlo)</label>
                        <input id="iters" class="range" type="range" min="10000" max="250000" step="5000" value="80000" />
                        <div class="muted" style="margin-top:6px;">Max: <b id="itersVal">80000</b></div>
                      </div>
                      <div>
                        <label for="calcMode">Rechenmodus</label>
                        <select id="calcMode">
                          <option value="auto" selected>Auto (empfohlen)</option>
                          <option value="mc">Monte-Carlo</option>
                          <option value="exact">Exakt (nur Heads-Up ab Flop)</option>
                        </select>
                      </div>
                      <div>
                        <label for="pot">Pot (optional)</label>
                        <input id="pot" type="number" min="0" step="0.01" placeholder="z. B. 12.50" />
                      </div>
                      <div>
                        <label for="call">Call (optional)</label>
                        <input id="call" type="number" min="0" step="0.01" placeholder="z. B. 4.00" />
                      </div>
                    </div>
                  </div>
                </details>
              </div>
            </div>

            <!-- Ergebnis -->
            <div class="subCard" id="resultsPanel">
              <div class="subHd">
                <div class="ttl">Ergebnis</div>
                <div class="muted">Output</div>
              </div>
              <div class="subBd">
                <div class="resultGrid" id="result" style="display:none;">
                  <div class="kpi">
                    <div class="k">Equity</div>
                    <div class="v" id="equity">—</div>
                    <div class="s" id="equityMeta">Score: —/100</div>
                    <div class="s" id="handNow">Aktuelle Kombination: —</div>
                    <div class="s" id="wtl">W/T/L: —</div>
                    <div class="s" id="ci">—</div>
                  </div>

                  <div class="kpi">
                    <div class="k">Empfehlung</div>
                    <div class="v" id="advice">—</div>
                    <div class="s" id="adviceDetail">—</div>

                    <div style="height:10px;"></div>

                    <div class="k">Entscheidungs-Score</div>
                    <div class="v" id="decisionScore">—</div>
                    <div class="s" id="decisionLabel">—</div>
                    <div class="s" id="decisionWhy">—</div>
                  </div>

                  <div class="kpi">
                    <div class="k">Details</div>
                    <div class="v" id="details">—</div>
                    <div class="s" id="details2">—</div>
                  </div>
                </div>
              </div>
            </div>

          </div><!-- /computeGrid -->
        </div>
      </section>

    </div><!-- /layout -->
  </div><!-- /wrap -->

  <div class="bottomBar">
    <div class="bottomWrap">
      <div class="statusTxt" id="statusText">Bereit.</div>
      <div class="bar" aria-label="Fortschritt"><div id="barFill"></div></div>
    </div>
  </div>

  <!-- Hand-Rankings Modal -->
  <div id="handsModal" class="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="handsTitle">
    <div class="modal" tabindex="-1">
      <div class="modalHd">
        <div class="modalTitle" id="handsTitle">Poker-Kombinationen</div>
        <button id="handsClose" class="closeBtn" type="button" aria-label="Schließen">Schließen</button>
      </div>
      <div class="modalBody">
        <table class="handsTable" aria-label="Poker Hand Rankings">
          <tbody>
            <tr class="handsRow">
              <td>Royal Flush<span class="handNameSub">A-K-Q-J-10 gleiche Farbe</span></td>
              <td><div class="miniCards">
                <span class="mCard mRed">10♦</span><span class="mCard mRed">J♦</span><span class="mCard mRed">Q♦</span><span class="mCard mRed">K♦</span><span class="mCard mRed">A♦</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Straight Flush<span class="handNameSub">Straße + Flush</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">7♣</span><span class="mCard mWhite">8♣</span><span class="mCard mWhite">9♣</span><span class="mCard mWhite">10♣</span><span class="mCard mWhite">J♣</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Vierling – Quads<span class="handNameSub">4 gleiche Karten</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">4♠</span><span class="mCard mRed">4♥</span><span class="mCard mWhite">4♣</span><span class="mCard mRed">4♦</span><span class="mCard mWhite">K♠</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Full House<span class="handNameSub">Drilling + Paar</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">10♣</span><span class="mCard mRed">10♦</span><span class="mCard mWhite">10♠</span><span class="mCard mWhite">2♣</span><span class="mCard mRed">2♥</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Flush<span class="handNameSub">5 gleiche Farbe</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">K♠</span><span class="mCard mWhite">9♠</span><span class="mCard mWhite">J♠</span><span class="mCard mWhite">5♠</span><span class="mCard mWhite">A♠</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Straße – Straight<span class="handNameSub">5 in Folge</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">7♣</span><span class="mCard mRed">8♦</span><span class="mCard mWhite">9♠</span><span class="mCard mRed">10♥</span><span class="mCard mWhite">J♣</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Drilling – Three of a Kind<span class="handNameSub">3 gleiche Karten</span></td>
              <td><div class="miniCards">
                <span class="mCard mRed">2♦</span><span class="mCard mWhite">2♣</span><span class="mCard mWhite">2♠</span><span class="mCard mRed">6♦</span><span class="mCard mRed">A♥</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Zwei Paare – Two Pair<span class="handNameSub">2 Paare</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">8♣</span><span class="mCard mRed">8♦</span><span class="mCard mRed">7♥</span><span class="mCard mWhite">7♣</span><span class="mCard mWhite">Q♠</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Ein Paar – One Pair<span class="handNameSub">1 Paar</span></td>
              <td><div class="miniCards">
                <span class="mCard mWhite">5♠</span><span class="mCard mRed">5♦</span><span class="mCard mWhite">J♣</span><span class="mCard mRed">10♥</span><span class="mCard mWhite">3♠</span>
              </div></td>
            </tr>
            <tr class="handsRow">
              <td>Hohe Karte – High Card<span class="handNameSub">keine Kombination</span></td>
              <td><div class="miniCards">
                <span class="mCard mRed">K♥</span><span class="mCard mWhite">2♠</span><span class="mCard mWhite">8♣</span><span class="mCard mRed">J♦</span><span class="mCard mRed">6♥</span>
              </div></td>
            </tr>
          </tbody>
        </table>
        <div class="modalNote">Diese Liste ist statisch und dient nur als Nachschlagehilfe.</div>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
